<?xml version="1.0" encoding="UTF-8"?>
<OspSystemStructure
        xmlns="http://opensimulationplatform.com/MSMI/OSPSystemStructure"
        version="0.1">
    <BaseStepSize>0.01</BaseStepSize>
    <Simulators>
        <Simulator name="Vessel" source="../../fmus/rigid_body.fmu">
            <InitialValues>
                <InitialValue variable="initial_position[1]">
                    <Real value="93.64"/>
                </InitialValue>
                <InitialValue variable="initial_position[2]">
                    <Real value="5747.41"/>
                </InitialValue>
                <InitialValue variable="initial_position[3]">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="initial_position[4]">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="initial_position[5]">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="initial_position[6]">
                    <Real value="0.9547"/>
                </InitialValue>
                <InitialValue variable="initial_velocity[1]">
                    <Real value="0.0"/>
                </InitialValue>	
                <InitialValue variable="initial_velocity[2]">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="initial_velocity[3]">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="initial_velocity[4]">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="initial_velocity[5]">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="initial_velocity[6]">
                    <Real value="0.0"/>
                </InitialValue>

                <!--Rigid body parameters-->
                <InitialValue variable="m"><Real value="49509.51207"/></InitialValue>
                <InitialValue variable="m_added[1]"><Real value="5484.2446"/></InitialValue>
                <InitialValue variable="m_added[2]"><Real value="55590.29751"/></InitialValue>
                <InitialValue variable="m_added[3]"><Real value="49707.55012"/></InitialValue>
                <InitialValue variable="I[1]"><Real value="388154.57463"/></InitialValue>
                <InitialValue variable="I[2]"><Real value="1059039.40662"/></InitialValue>
                <InitialValue variable="I[3]"><Real value="1059039.40662"/></InitialValue>
                <InitialValue variable="I_added[1]"><Real value="31686.08772"/></InitialValue>
                <InitialValue variable="I_added[2]"><Real value="660840.58973"/></InitialValue>
                <InitialValue variable="I_added[3]"><Real value="938491.35669"/></InitialValue>
				
			    <!-- Quays -->
                <InitialValue variable="L_vessel">
                    <Real value="18.5"/>
                </InitialValue>
                <InitialValue variable="B_vessel">
                    <Real value="7.73"/>
                </InitialValue>
                <InitialValue variable="k_quay">
                    <Real value="100000"/>
                </InitialValue>
                <InitialValue variable="d_quay">
                    <Real value="160000"/>
                </InitialValue>
                <InitialValue variable="mu_quay">
                    <Real value="1"/>
                </InitialValue>
				
			    <!-- Dock at Marina Bay Cruise Center (1.265026, 103.861269) -->
                <InitialValue variable="quay_1_en"><Boolean value="true"/></InitialValue>
                <InitialValue variable="quay_1_p0[1]"><Real value="72.16"/></InitialValue>
                <InitialValue variable="quay_1_p0[2]"><Real value="5709.77"/></InitialValue>
                <InitialValue variable="quay_1_p1[1]"><Real value="141.82"/></InitialValue>
                <InitialValue variable="quay_1_p1[2]"><Real value="5807.42"/></InitialValue>
                <InitialValue variable="quay_1_depth"><Real value="350.0"/></InitialValue>
				<!-- Container Ship. NOTE: Disabled by default, switch to 'true' to enable -->
			    <InitialValue variable="quay_2_en"><Boolean value="false"/></InitialValue>
                <InitialValue variable="quay_2_p0[1]"><Real value="-204.4275"/></InitialValue>
                <InitialValue variable="quay_2_p0[2]"><Real value="6166.828"/></InitialValue>
                <InitialValue variable="quay_2_p1[1]"><Real value="-362.33"/></InitialValue>
                <InitialValue variable="quay_2_p1[2]"><Real value="6028.13"/></InitialValue>
                <InitialValue variable="quay_2_depth"><Real value="32.7"/></InitialValue>

            </InitialValues>
        </Simulator>
        <!-- Hydrodynamic model for the hull -->
        <Simulator name="hull_maneuvering" source="../../fmus/hull_maneuvering.fmu">
			<InitialValues>
                <InitialValue variable="Xvv"><Real value="-0.04"/></InitialValue>
                <InitialValue variable="Xvr"><Real value="0.002"/></InitialValue>
                <InitialValue variable="Xrr"><Real value="0.011"/></InitialValue>
                <InitialValue variable="Xvvvv"><Real value="0.771"/></InitialValue>
                <InitialValue variable="Yv"><Real value="-0.315"/></InitialValue>
                <InitialValue variable="Yr"><Real value="0.083"/></InitialValue>
                <InitialValue variable="Yvvv"><Real value="-1.607"/></InitialValue>
                <InitialValue variable="Yvrr"><Real value="-0.391"/></InitialValue>
                <InitialValue variable="Yvvr"><Real value="0.379"/></InitialValue>
                <InitialValue variable="Yrrr"><Real value="0.008"/></InitialValue>
                <InitialValue variable="Nv"><Real value="-0.137"/></InitialValue>
                <InitialValue variable="Nr"><Real value="-0.049"/></InitialValue>
                <InitialValue variable="Nvvv"><Real value="-0.03"/></InitialValue>
                <InitialValue variable="Nvrr"><Real value="0.055"/></InitialValue>
                <InitialValue variable="Nvvr"><Real value="-0.294"/></InitialValue>
                <InitialValue variable="Nrrr"><Real value="-0.013"/></InitialValue>
                <InitialValue variable="shape_factor"><Real value="0.05187"/></InitialValue>
                <InitialValue variable="CR_m"><Real value="0.11644"/></InitialValue>
                <InitialValue variable="CR_p"><Real value="4.2319"/></InitialValue>
                <InitialValue variable="CD_lateral"><Real value="0.022"/></InitialValue>
                <InitialValue variable="length"><Real value="18.5"/></InitialValue>
                <InitialValue variable="depth"><Real value="1.42"/></InitialValue>
                <InitialValue variable="wetted_surface"><Real value="118.06"/></InitialValue>

                 <!-- Low speed model -->
                <InitialValue variable="CX_low"> <Real value="0.05"/></InitialValue>
                <InitialValue variable="CY_low"> <Real value="2.0"/></InitialValue>
                <InitialValue variable="CN_low"> <Real value="0.15"/></InitialValue>
                <InitialValue variable="Nr_low"> <Real value="-250e3"/></InitialValue>

                <!-- Model mixing -->
                <InitialValue variable="speed_limit_low"> <Real value="0.75"/></InitialValue>
                <InitialValue variable="speed_transfer_range"> <Real value="0.25"/></InitialValue>
                <InitialValue variable="low_speed_model"><Boolean value="true"/></InitialValue>
                <InitialValue variable="high_speed_model"><Boolean value="true"/></InitialValue>

            </InitialValues>
		</Simulator>

        <!-- Seakeeping model for the hull -->
        <Simulator name="hull_seakeeping" source="../../fmus/hull_seakeeping.fmu">
			<InitialValues>
                <InitialValue variable="mass"><Real value="49509.51207"/></InitialValue>
                <InitialValue variable="waterplane_area"><Real value="59.3"/></InitialValue>
                <InitialValue variable="GM_roll"><Real value="9.428"/></InitialValue>
                <InitialValue variable="GM_pitch"><Real value="27.14"/></InitialValue>
                <InitialValue variable="heave_damping"><Real value="145974.55981"/></InitialValue>
                <InitialValue variable="roll_damping"><Real value="415888.43594"/></InitialValue>
                <InitialValue variable="pitch_damping"><Real value="2856332.74381"/></InitialValue>
            </InitialValues>
		</Simulator>

        <Simulator name="Thruster STB" source="../../fmus/azimuth_thruster.fmu">
			<InitialValues>
                <InitialValue variable="rudder_area"> <Real value="0.1"/></InitialValue>
                <InitialValue variable="rudder_chord"><Real value="0.2"/></InitialValue>

                <InitialValue variable="longitudinal_position"><Real value="-5.8"/></InitialValue>
                <InitialValue variable="lateral_position"><Real value="2.4"/></InitialValue>

                <InitialValue variable="ship_length"><Real value="18.5"/></InitialValue>

                <InitialValue variable="cd_k"> <Real value="19.92625501"/></InitialValue>
                <InitialValue variable="cd_a2"><Real value="0.0"/></InitialValue>
                
                <InitialValue variable="effective_aspect_ratio_lift"><Real value="0.8"/></InitialValue>
                <InitialValue variable="effective_aspect_ratio_drag"><Real value="0.55"/></InitialValue>

                <InitialValue variable="tr"><Real value="0.0"/></InitialValue>
                <InitialValue variable="ah"><Real value="0.22"/></InitialValue>
                <InitialValue variable="xh"><Real value="-0.055"/></InitialValue>

                <InitialValue variable="cd_stall_max"><Real value="1.0"/></InitialValue>
                <InitialValue variable="cd_stall_power"><Real value="1.6"/></InitialValue>

                <InitialValue variable="cl_stall_mean"><Real value="0.6"/></InitialValue>
                <InitialValue variable="cl_post_stall_max"><Real value="1.0"/></InitialValue>

                <InitialValue variable="propeller_geometry"><String value="WAGENINGEN_B4_BAR70_PD1"/></InitialValue>
                <InitialValue variable="pitch_scaling_factor"><Real value="1.0"/></InitialValue>
                <InitialValue variable="propeller_diameter"><Real value="0.85"/></InitialValue>
				<InitialValue variable="wake_factor"><Real value="0.0"/></InitialValue>
                <InitialValue variable="thrust_deduction_factor"><Real value="0.0"/></InitialValue>

                <InitialValue variable="rotations_per_second"><Real value="0.0"/></InitialValue>
                <InitialValue variable="angle"><Real value="0.0"/></InitialValue>
            </InitialValues>
		</Simulator>

         <Simulator name="Steering machinery STB" source="../../fmus/steering_machinery.fmu">
            <InitialValues>
                <InitialValue variable="max_speed">
                    <Real value="0.109"/><!--rad/s-->
                </InitialValue>
                <InitialValue variable="initial_angle">
                    <Real value="0.0"/>
                </InitialValue>
            </InitialValues>
        </Simulator>

        <Simulator name="Electric drive STB" source="../../fmus/electric_drive.fmu">
            <InitialValues>
                <InitialValue variable="max_rpm">
                    <Real value="800"/>
                </InitialValue>
                <InitialValue variable="time_constant">
                    <Real value="0.7"/>
                </InitialValue>
                <InitialValue variable="max_rpm_rate">
                    <Real value="76"/>
                </InitialValue>
            </InitialValues>
        </Simulator>

        <Simulator name="propulsion_interface_stb" source="../../fmus/propulsion_interface_modbus_tcp.fmu">
            <InitialValues>
                <InitialValue variable="modbus_server_ip">
                    <String value="127.0.0.1" />
                </InitialValue>
                <InitialValue variable="modbus_server_port">
                    <Integer value="10502" />
                </InitialValue>
                <InitialValue variable="holding_register_base_address">
                    <Integer value="200" />
                </InitialValue>
                <InitialValue variable="num_holding_registers">
                    <Integer value="57" />
                </InitialValue>
                <InitialValue variable="autonomy_system_heartbeat_signal_address">
                    <Integer value="200" />
                </InitialValue>
                <InitialValue variable="autonomy_available_signal_address">
                    <Integer value="201" />
                </InitialValue>
                <InitialValue variable="propulsion_rpm_command_signal_address">
                    <Integer value="202" />
                </InitialValue>
                <InitialValue variable="steering_degree_command_signal_address">
                    <Integer value="203" />
                </InitialValue>
                <InitialValue variable="ready_for_autonomy_button_signal_address">
                    <Integer value="204" />
                </InitialValue>
                <InitialValue variable="lcp_heartbeat_signal_address">
                    <Integer value="250" />
                </InitialValue>
                <InitialValue variable="ready_for_autonomy_signal_address">
                    <Integer value="251" />
                </InitialValue>
                <InitialValue variable="propulsion_drive_status_signal_address">
                    <Integer value="252" />
                </InitialValue>
                <InitialValue variable="steering_drive_status_signal_address">
                    <Integer value="253" />
                </InitialValue>
                <InitialValue variable="propulsion_rpm_feedback_signal_address">
                    <Integer value="254" />
                </InitialValue>
                <InitialValue variable="steering_degree_feedback_signal_address">
                    <Integer value="255" />
                </InitialValue>
                <InitialValue variable="ready_for_autonomy_button_available_signal_address">
                    <Integer value="256" />
                </InitialValue>
            </InitialValues>
        </Simulator>

        <Simulator name="Thruster Port" source="../../fmus/azimuth_thruster.fmu">
			<InitialValues>
                <InitialValue variable="rudder_area"> <Real value="0.1"/></InitialValue>
                <InitialValue variable="rudder_chord"><Real value="0.2"/></InitialValue>

                <InitialValue variable="longitudinal_position"><Real value="-5.8"/></InitialValue>
                <InitialValue variable="lateral_position"><Real value="-2.4"/></InitialValue>

                <InitialValue variable="ship_length"><Real value="18.5"/></InitialValue>

                <InitialValue variable="cd_k"> <Real value="19.92625501"/></InitialValue>
                <InitialValue variable="cd_a2"><Real value="0.0"/></InitialValue>
                
                <InitialValue variable="effective_aspect_ratio_lift"><Real value="0.8"/></InitialValue>
                <InitialValue variable="effective_aspect_ratio_drag"><Real value="0.55"/></InitialValue>

                <InitialValue variable="tr"><Real value="0.0"/></InitialValue>
                <InitialValue variable="ah"><Real value="0.22"/></InitialValue>
                <InitialValue variable="xh"><Real value="-0.055"/></InitialValue>

                <InitialValue variable="cd_stall_max"><Real value="1.0"/></InitialValue>
                <InitialValue variable="cd_stall_power"><Real value="1.6"/></InitialValue>

                <InitialValue variable="cl_stall_mean"><Real value="0.6"/></InitialValue>
                <InitialValue variable="cl_post_stall_max"><Real value="1.0"/></InitialValue>

                <InitialValue variable="propeller_geometry"><String value="WAGENINGEN_B4_BAR70_PD1"/></InitialValue>
                <InitialValue variable="pitch_scaling_factor"><Real value="1.0"/></InitialValue>
                <InitialValue variable="propeller_diameter"><Real value="0.85"/></InitialValue>
				<InitialValue variable="wake_factor"><Real value="0.0"/></InitialValue>
                <InitialValue variable="thrust_deduction_factor"><Real value="0.0"/></InitialValue>

                <InitialValue variable="rotations_per_second"><Real value="0.0"/></InitialValue>
                <InitialValue variable="angle"><Real value="0.0"/></InitialValue>
            </InitialValues>
		</Simulator>

        <Simulator name="Steering machinery Port" source="../../fmus/steering_machinery.fmu">
            <InitialValues>
                <InitialValue variable="max_speed">
                    <Real value="0.109"/><!--rad/s-->
                </InitialValue>
                <InitialValue variable="initial_angle">
                    <Real value="0.0"/>
                </InitialValue>
            </InitialValues>
        </Simulator>

        <Simulator name="Electric drive Port" source="../../fmus/electric_drive.fmu">
            <InitialValues>
                <InitialValue variable="max_rpm">
                    <Real value="800"/>
                </InitialValue>
                <InitialValue variable="time_constant">
                    <Real value="0.7"/>
                </InitialValue>
                <InitialValue variable="max_rpm_rate">
                    <Real value="76"/>
                </InitialValue>
            </InitialValues>
        </Simulator>

        <Simulator name="propulsion_interface_port" source="../../fmus/propulsion_interface_modbus_tcp.fmu">
            <InitialValues>
                <InitialValue variable="modbus_server_ip">
                    <String value="127.0.0.1" />
                </InitialValue>
                <InitialValue variable="modbus_server_port">
                    <Integer value="10503" />
                </InitialValue>
                <InitialValue variable="holding_register_base_address">
                    <Integer value="100" />
                </InitialValue>
                <InitialValue variable="num_holding_registers">
                    <Integer value="57" />
                </InitialValue>
                <InitialValue variable="autonomy_system_heartbeat_signal_address">
                    <Integer value="100" />
                </InitialValue>
                <InitialValue variable="autonomy_available_signal_address">
                    <Integer value="101" />
                </InitialValue>
                <InitialValue variable="propulsion_rpm_command_signal_address">
                    <Integer value="102" />
                </InitialValue>
                <InitialValue variable="steering_degree_command_signal_address">
                    <Integer value="103" />
                </InitialValue>
                <InitialValue variable="ready_for_autonomy_button_signal_address">
                    <Integer value="104" />
                </InitialValue>
                <InitialValue variable="lcp_heartbeat_signal_address">
                    <Integer value="150" />
                </InitialValue>
                <InitialValue variable="ready_for_autonomy_signal_address">
                    <Integer value="151" />
                </InitialValue>
                <InitialValue variable="propulsion_drive_status_signal_address">
                    <Integer value="152" />
                </InitialValue>
                <InitialValue variable="steering_drive_status_signal_address">
                    <Integer value="153" />
                </InitialValue>
                <InitialValue variable="propulsion_rpm_feedback_signal_address">
                    <Integer value="154" />
                </InitialValue>
                <InitialValue variable="steering_degree_feedback_signal_address">
                    <Integer value="155" />
                </InitialValue>
                <InitialValue variable="ready_for_autonomy_button_available_signal_address">
                    <Integer value="156" />
                </InitialValue>
            </InitialValues>
        </Simulator>

        <Simulator name="Wave forces" source="../../fmus/wave_forces.fmu">
            <InitialValues>
                <InitialValue variable="wave_force_stddev[1,1]">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="wave_force_stddev[1,2]">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="wave_force_stddev[1,3]">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="wave_force_stddev[1,4]">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="wave_force_stddev[1,5]">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="wave_force_stddev[1,6]">
                    <Real value="0.0"/>
                </InitialValue>
            </InitialValues>
        </Simulator>
        
        <Simulator name="Wind model" source="../../fmus/wind_model.fmu">
            <InitialValues>
                <InitialValue variable="mean_wind_direction">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="mean_wind_speed">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="wind_direction_noise_power">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="wind_direction_time_constant">
                    <Real value="10.0"/>
                </InitialValue>
                <InitialValue variable="wind_speed_noise_power">
                    <Real value="0.0"/>
                </InitialValue>
                <InitialValue variable="wind_speed_time_constant">
                    <Real value="10.0"/>
                </InitialValue>
            </InitialValues>
        </Simulator>
        
        <Simulator name="Wind loads" source="../../fmus/wind_loads.fmu">
            <InitialValues>
                <InitialValue variable="A_Fw">
                    <Real value="45.0"/>
                </InitialValue>
                <InitialValue variable="A_Lw">
                    <Real value="53.1"/>
                </InitialValue>
                <InitialValue variable="CD_lAF">
                    <Real value="0.55"/>
                </InitialValue>
                <InitialValue variable="CD_t">
                    <Real value="0.9"/>
                </InitialValue>
                <InitialValue variable="H_Lw">
                    <Real value="20."/>
                </InitialValue>
                <InitialValue variable="L_oa">
                    <Real value="18.5"/>
                </InitialValue>
                <InitialValue variable="delta">
                    <Real value="0.6"/>
                </InitialValue>
                <InitialValue variable="kappa">
                    <Real value="1.1"/>
                </InitialValue>
                <InitialValue variable="rho_air">
                    <Real value="1.225"/>
                </InitialValue>
                <InitialValue variable="s_L">
                    <Real value="0.0"/>
                </InitialValue>
            </InitialValues>
        </Simulator>

        <Simulator name="zb_sim_clock" source="../../fmus/fmi_zb_sim_clock.fmu" stepSize="0.01">
            <InitialValues>
                <InitialValue variable="remote_ip">
                    <String value="127.0.0.1"/>
                </InitialValue>
                <InitialValue variable="remote_port">
                    <String value="3001"/>
                </InitialValue>
            </InitialValues>
        </Simulator>

        <Simulator name="advanced_navigation_gps_compass" source="../../fmus/fmi_advanced_navigation.fmu" stepSize="0.05">
            <InitialValues>
                <InitialValue variable="autonomy_machine_remote_ip">
                    <String value="127.0.0.1"/>
                </InitialValue>
                <InitialValue variable="autonomy_machine_remote_port">
                    <String value="16718"/>
                </InitialValue>
                <InitialValue variable="latitude0">
                    <Real value="1.2640358969885601"/>
                </InitialValue>
                <InitialValue variable="longitude0">
                    <Real value="103.80956039467998"/>
                </InitialValue>
                <InitialValue variable="height0">
                    <Real value="13.570"/>
                </InitialValue>
            </InitialValues>
        </Simulator>
    </Simulators>
    
    <Functions>
        <LinearTransformation name="rpm2rps_1" factor="0.016666666666666666" offset="0"/>
        <LinearTransformation name="rpm2rps_2" factor="0.016666666666666666" offset="0"/>

        <VectorSum name="vessel_force_sum" inputCount="6" dimension="6"/>
    </Functions>
    
    <Connections>
       <SignalGroupConnection>
            <VariableGroup simulator="Thruster STB" name="force_body_6dof"/>
            <SignalGroup function="vessel_force_sum" name="in[0]"/>
        </SignalGroupConnection>
        <SignalGroupConnection>
            <VariableGroup simulator="Thruster Port" name="force_body_6dof"/>
            <SignalGroup function="vessel_force_sum" name="in[1]"/>
        </SignalGroupConnection>
        <SignalGroupConnection>
            <VariableGroup simulator="Wave forces" name="wave_forces"/>
            <SignalGroup function="vessel_force_sum" name="in[2]"/>
        </SignalGroupConnection>
        <SignalGroupConnection>
            <VariableGroup simulator="Wind loads" name="wind_loads"/>
            <SignalGroup function="vessel_force_sum" name="in[3]"/>
        </SignalGroupConnection>
        <SignalGroupConnection>
            <VariableGroup simulator="hull_maneuvering" name="force_body_6dof"/>
            <SignalGroup function="vessel_force_sum" name="in[4]"/>
        </SignalGroupConnection>
        <SignalGroupConnection>
            <VariableGroup simulator="hull_seakeeping" name="force_body_6dof"/>
            <SignalGroup function="vessel_force_sum" name="in[5]"/>
        </SignalGroupConnection>
        <SignalGroupConnection>
            <SignalGroup function="vessel_force_sum" name="out"/>
            <VariableGroup simulator="Vessel" name="external_force"/>
        </SignalGroupConnection>

        <VariableGroupConnection>
            <VariableGroup simulator="Vessel" name="velocity_body_3dof"/>
            <VariableGroup simulator="hull_maneuvering" name="velocity_body_3dof"/>
        </VariableGroupConnection>

        <VariableGroupConnection>
            <VariableGroup simulator="Vessel" name="velocity_seakeeping"/>
            <VariableGroup simulator="hull_seakeeping" name="velocity"/>
        </VariableGroupConnection>

        <VariableGroupConnection>
            <VariableGroup simulator="Vessel" name="displacement_seakeeping"/>
            <VariableGroup simulator="hull_seakeeping" name="displacement"/>
        </VariableGroupConnection>

        <!-- Wind -->
        <VariableConnection>
            <Variable simulator="Wind model" name="wind_direction"/>
            <Variable simulator="Wind loads" name="wind_direction"/>
        </VariableConnection>
        <VariableConnection>
            <Variable simulator="Wind model" name="wind_speed"/>
            <Variable simulator="Wind loads" name="wind_speed"/>
        </VariableConnection>
        <VariableGroupConnection>
            <VariableGroup simulator="Vessel" name="velocity_body_6dof"/>
            <VariableGroup simulator="Wind loads" name="vessel_velocity"/>
        </VariableGroupConnection>
        <VariableGroupConnection>
            <VariableGroup simulator="Vessel" name="position_6dof"/>
            <VariableGroup simulator="Wind loads" name="vessel_position"/>
        </VariableGroupConnection>

        <VariableGroupConnection>
            <VariableGroup simulator="Vessel" name="position_6dof"/>
            <VariableGroup simulator="advanced_navigation_gps_compass" name="pose"/>
        </VariableGroupConnection>
        <VariableGroupConnection>
            <VariableGroup simulator="Vessel" name="velocity_body_6dof"/>
            <VariableGroup simulator="advanced_navigation_gps_compass" name="twist_body"/>
        </VariableGroupConnection>
        <VariableGroupConnection>
            <VariableGroup simulator="Vessel" name="velocity_ned_6dof"/>
            <VariableGroup simulator="advanced_navigation_gps_compass" name="twist_ned"/>
        </VariableGroupConnection>
        <VariableGroupConnection>
            <VariableGroup simulator="Vessel" name="acceleration_6dof"/>
            <VariableGroup simulator="advanced_navigation_gps_compass" name="acceleration_6dof"/>
        </VariableGroupConnection>

         <!-- Thrusters -->
        <VariableGroupConnection>
            <VariableGroup simulator="Vessel" name="velocity_body_3dof"/>
            <VariableGroup simulator="Thruster STB" name="velocity_body_3dof"/>
        </VariableGroupConnection>
         <VariableGroupConnection>
            <VariableGroup simulator="Vessel" name="velocity_body_3dof"/>
            <VariableGroup simulator="Thruster Port" name="velocity_body_3dof"/>
        </VariableGroupConnection>

       <!-- Propulsion interface -->
       <VariableConnection>
            <Variable simulator="propulsion_interface_port" name="rpm_cmd"/>
            <Variable simulator="Electric drive Port" name="rpm_command"/>
       </VariableConnection>
       <VariableConnection>
            <Variable simulator="propulsion_interface_port" name="angle_cmd"/>
            <Variable simulator="Steering machinery Port" name="target_angle"/>
        </VariableConnection>
       <VariableConnection>
            <Variable simulator="propulsion_interface_stb" name="rpm_cmd"/>
            <Variable simulator="Electric drive STB" name="rpm_command"/>
        </VariableConnection>
       <VariableConnection>
            <Variable simulator="propulsion_interface_stb" name="angle_cmd"/>
            <Variable simulator="Steering machinery STB" name="target_angle"/>
        </VariableConnection>
       <VariableConnection>
            <Variable simulator="Electric drive Port" name="rpm"/>
            <Variable simulator="propulsion_interface_port" name="rpm_fb"/>
        </VariableConnection>
       <VariableConnection>
            <Variable simulator="Steering machinery Port" name="angle"/>
            <Variable simulator="propulsion_interface_port" name="angle_fb"/>
        </VariableConnection>
       <VariableConnection>
            <Variable simulator="Electric drive STB" name="rpm"/>
            <Variable simulator="propulsion_interface_stb" name="rpm_fb"/>
        </VariableConnection>
        <VariableConnection>
            <Variable simulator="Steering machinery STB" name="angle"/>
            <Variable simulator="propulsion_interface_stb" name="angle_fb"/>
        </VariableConnection>
       
        <VariableConnection>
            <Variable simulator="Steering machinery STB" name="angle"/>
            <Variable simulator="Thruster STB" name="angle"/>
        </VariableConnection>
        <VariableConnection>
            <Variable simulator="Steering machinery Port" name="angle"/>
            <Variable simulator="Thruster Port" name="angle"/>
        </VariableConnection>

        <SignalConnection>
            <Variable simulator="Electric drive STB" name="rpm"/>
            <Signal function="rpm2rps_1" name="in"/>
        </SignalConnection>
        <SignalConnection>
            <Signal function="rpm2rps_1" name="out"/>
            <Variable simulator="Thruster STB" name="rotations_per_second"/>
        </SignalConnection>
        <SignalConnection>
            <Variable simulator="Electric drive Port" name="rpm"/>
            <Signal function="rpm2rps_2" name="in"/>
        </SignalConnection>
        <SignalConnection>
            <Signal function="rpm2rps_2" name="out"/>
            <Variable simulator="Thruster Port" name="rotations_per_second"/>
        </SignalConnection>

    </Connections>
</OspSystemStructure>
