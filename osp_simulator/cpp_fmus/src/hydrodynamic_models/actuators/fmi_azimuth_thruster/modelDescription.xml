<?xml version="1.0" encoding="utf-8" ?>

<fmiModelDescription
    fmiVersion="2.0"
    modelName="azimuth_thruster"
    guid="@FMU_UUID@"
    description="Azimuth thruster model. 4-quadrant propoeller, rudder effect and hull interaction."
    author="Tobias Rye Torben"
    version="1.0">

    <CoSimulation
        modelIdentifier="azimuth_thruster"
        canHandleVariableCommunicationStepSize="true" />

    <ModelVariables>
        <!--Fluid properties-->
        <ScalarVariable name="density" valueReference="1" causality="parameter" variability="fixed"><Real start="1025.9"/></ScalarVariable>
        <ScalarVariable name="kinematic_viscosity"  valueReference="2" causality="parameter" variability="fixed"><Real start="1.19e-6"/></ScalarVariable>

        <!--Geometric paramters-->
        <ScalarVariable name="rudder_area"  valueReference="3" causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>
        <ScalarVariable name="rudder_chord" valueReference="4" causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>
        <ScalarVariable name="propeller_diameter" valueReference="5"  causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>

        <ScalarVariable name="longitudinal_position" valueReference="6" causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>
        <ScalarVariable name="lateral_position" valueReference="7" causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>

        <ScalarVariable name="ship_length" valueReference="8" causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>
       
       <!--Rudder effect paramters-->
        <ScalarVariable name="effective_aspect_ratio_lift" valueReference="9" causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>
        <ScalarVariable name="effective_aspect_ratio_drag" valueReference="10" causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>

        <ScalarVariable name="cd_k"  valueReference="11"  causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>
        <ScalarVariable name="cd_a2" valueReference="12" causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>

        <ScalarVariable name="cd_stall_max"  valueReference="13"  causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>
        <ScalarVariable name="cd_stall_power" valueReference="14" causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>

        <ScalarVariable name="cl_stall_mean" valueReference="15" causality="parameter" variability="fixed"><Real start="2.0"/></ScalarVariable>
        <ScalarVariable name="cl_post_stall_max" valueReference="16" causality="parameter" variability="fixed"><Real start="2.0"/></ScalarVariable>

        <ScalarVariable name="tr" valueReference="17" causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>
        <ScalarVariable name="ah" valueReference="18" causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>
        <ScalarVariable name="xh" valueReference="19" causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>

        <!--Propeller parameters-->
        <ScalarVariable name="wake_factor" valueReference="20"  causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>
        <ScalarVariable name="thrust_deduction_factor" valueReference="21"  causality="parameter" variability="fixed"><Real start="0.0"/></ScalarVariable>

        <!--4Q propeller coefficients-->
        <ScalarVariable name="propeller_geometry" valueReference="22"  causality="parameter" variability="fixed"><String start=""/></ScalarVariable>
        <ScalarVariable name="pitch_scaling_factor" valueReference="23"  causality="parameter" variability="fixed"><Real start="1.0"/></ScalarVariable>

        <!--Input signals-->
        <ScalarVariable name="ship_velocity_surge" valueReference="101" causality="input"><Real start="0.0"/></ScalarVariable>
        <ScalarVariable name="ship_velocity_sway"  valueReference="102" causality="input"><Real start="0.0"/></ScalarVariable>
        <ScalarVariable name="ship_velocity_yaw"   valueReference="103" causality="input"><Real start="0.0"/></ScalarVariable>

        <ScalarVariable name="rotations_per_second" valueReference="104" causality="input"><Real start="0.0"/></ScalarVariable>
        
        <ScalarVariable name="angle"  valueReference="105" causality="input"><Real start="0.0"/></ScalarVariable>

        <!--Output signals-->
        <ScalarVariable name="force_surge" valueReference="201" causality="output"><Real/></ScalarVariable>
        <ScalarVariable name="force_sway"  valueReference="202" causality="output"><Real/></ScalarVariable>
        <ScalarVariable name="moment_yaw"  valueReference="203" causality="output"><Real/></ScalarVariable>

        <ScalarVariable name="thrust" valueReference="204" causality="output"><Real/></ScalarVariable>
        <ScalarVariable name="torque" valueReference="205" causality="output"><Real/></ScalarVariable>
        <ScalarVariable name="power"  valueReference="206" causality="output"><Real/></ScalarVariable>

        <ScalarVariable name="force_heave"  valueReference="207" causality="output"><Real/></ScalarVariable>
        <ScalarVariable name="moment_roll"  valueReference="208" causality="output"><Real/></ScalarVariable>
        <ScalarVariable name="moment_pitch"  valueReference="209" causality="output"><Real/></ScalarVariable>
    </ModelVariables>

    <ModelStructure/>

</fmiModelDescription>